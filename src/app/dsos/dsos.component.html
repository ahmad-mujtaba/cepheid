<div class="dso-container">
    <div class="dso-header">
        <h2 class="section-title">Deep Sky Objects</h2>
        <span class="object-count">{{dsos.length}} objects</span>
    </div>

    <div class="filter-chips" [formGroup]="selectedTypes">
        @for (type of types; track type) {
            <label class="chip" [class.active]="selectedTypes.get(type)?.value">
                <input type="checkbox" [formControlName]="type" (change)="change()" hidden>
                {{type}}
            </label>
        }
    </div>

    <div class="dso-list">
        @for (dso of dsos; track dso.id) {
            <div class="dso-card">
                <div class="dso-main">
                    <div class="dso-name">{{dso.common_name || dso.catalogue}}</div>
                    @if (dso.common_name) {
                        <div class="dso-catalogue">{{dso.catalogue}}</div>
                    }
                </div>
                <div class="dso-stats">
                    <div class="stat">
                        <span class="stat-label">mag</span>
                        <span class="stat-value">{{dso.magnitude}}</span>
                        
                    </div>
                    <div class="stat">
                        <span class="stat-label">visible</span>
                        <span class="stat-value">{{dso.visibility.visibleDuration | prettyTime}}</span>
                        
                    </div>
                    <!-- <div class="stat">
                        <span class="stat-value">{{dso.constellation}}</span>
                        <span class="stat-label">const</span>
                    </div> -->
                    <div class="stat type-stat">
                        <span class="dso-type">{{dso.type}}</span>
                    </div>
                </div>
            </div>
        } @empty {
            <div class="loading-state">
                <div class="loading-spinner"></div>
                <span>Loading objects...</span>
            </div>
        }
    </div>
</div>
